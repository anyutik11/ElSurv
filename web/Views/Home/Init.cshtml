@{
    ViewData["Title"] = "Init";
}


<h3 class="text-danger text-center py-5">All data in DB may be lost. Are you sure?</h3>

<div class="text-center">
    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal1">
        Erase & Init Database
    </button>
</div>

<!-- Modal -->
<div class="modal fade" id="modal1" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirm DB init</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <div class="text-center modal-body">
                Start DB erasing and initialisation? All data may be lost.
            </div>

            <div id="pb1" class="progress m-3" role="progressbar" aria-label="Example with label" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div id="pb2" class="progress-bar" style="width: 0%"></div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a id="startBtn" asp-action="Init2" class="btn btn-danger">Start</a>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $("#pb1").hide();
        });
        var i=1;
        $("#startBtn").click(function () {
            $("#pb1").show();
            var interval = setInterval(()=>{
                i+=1;                
                if (i>=100) {
                    clearInterval(interval);
                }                
                $("#pb2").width(i+'%');
                $("#pb2").html(i + '%');
            }, 50)
        });    
    </script>
}